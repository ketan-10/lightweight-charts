var f=Object.defineProperty;var U=(s,e,t)=>e in s?f(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var i=(s,e,t)=>U(s,typeof e!="symbol"?e+"":e,t);import{c as H,l as x}from"./index-DxQGhxyu.js";import{g as S}from"./sample-data-x_8-FZm1.js";const v=""+new URL("image-etYceiEU.svg",import.meta.url).href;class V{constructor(e,t){i(this,"_source");i(this,"_view");this._source=e,this._view=t}draw(e){e.useMediaCoordinateSpace(t=>{const r=t.context,a=this._view._placement;if(a){if(!this._source._imgElement)throw new Error("Image element missing.");r.globalAlpha=this._source._options.alpha??1,r.drawImage(this._source._imgElement,a.x,a.y,a.width,a.height)}})}}class q{constructor(e){i(this,"_source");i(this,"_placement",null);this._source=e}zOrder(){return"bottom"}update(){this._placement=this._determinePlacement()}renderer(){return new V(this._source,this)}_determinePlacement(){if(!this._source._chart)return null;const e=this._source._chart.priceScale("left").width(),t=this._source._chart.timeScale().width(),r=e,a=this._source._chart.chartElement().clientHeight-this._source._chart.timeScale().height(),n=Math.round(t/2)+r,g=Math.round(a/2)+0,c=this._source._options.padding??0;let h=t-2*c,o=a-2*c;this._source._options.maxHeight&&(o=Math.min(o,this._source._options.maxHeight)),this._source._options.maxWidth&&(h=Math.min(h,this._source._options.maxWidth));const p=h/this._source._imageWidth,w=o/this._source._imageHeight,l=Math.min(p,w),_=this._source._imageWidth*l,m=this._source._imageHeight*l,E=n-.5*_,W=g-.5*m;return{x:E,y:W,height:m,width:_}}}class I{constructor(e,t){i(this,"_paneViews");i(this,"_imgElement",null);i(this,"_imageUrl");i(this,"_options");i(this,"_imageHeight",0);i(this,"_imageWidth",0);i(this,"_chart",null);i(this,"_containerElement",null);i(this,"_requestUpdate");this._imageUrl=e,this._options=t,this._paneViews=[new q(this)]}attached({chart:e,requestUpdate:t}){this._chart=e,this._requestUpdate=t,this._containerElement=e.chartElement(),this._imgElement=new Image,this._imgElement.onload=()=>{var r,a;this._imageHeight=((r=this._imgElement)==null?void 0:r.naturalHeight)??1,this._imageWidth=((a=this._imgElement)==null?void 0:a.naturalWidth)??1,this._paneViews.forEach(n=>n.update()),this.requestUpdate()},this._imgElement.src=this._imageUrl}detached(){this._imgElement=null}requestUpdate(){this._requestUpdate&&this._requestUpdate()}updateAllViews(){this._paneViews.forEach(e=>e.update())}paneViews(){return this._paneViews}}const u=document.querySelector("#chart");if(!u)throw new Error("Unable to located container div element");const M=window.chart=H(u,{autoSize:!0}),P=new I(v,{maxHeight:400,maxWidth:400,padding:50,alpha:.4}),d=M.addSeries(x),b=S();d.setData(b);d.attachPrimitive(P);
