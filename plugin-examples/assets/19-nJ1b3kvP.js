var E=Object.defineProperty;var b=(e,t,a)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var c=(e,t,a)=>b(e,typeof t!="symbol"?t+"":t,a);import{a as M,c as S}from"./index-DNsBFaw8.js";import{g as V}from"./sample-data-x_8-FZm1.js";import{a as B}from"./positions-t2UKkghX.js";const C={...M,color:"#D63864",widthPercent:50,radius:4};class D{constructor(){c(this,"_data",null);c(this,"_options",null)}draw(t,a){t.useBitmapCoordinateSpace(o=>this._drawImpl(o,a))}update(t,a){this._data=t,this._options=a}_drawImpl(t,a){if(this._data===null||this._data.bars.length===0||this._data.visibleRange===null||this._options===null)return;const o=this._options,P=this._data.bars.map(n=>({x:n.x*t.horizontalPixelRatio,value:a(n.originalData.value),color:n.barColor??o.color})),w=a(0)??0,r=t.context;let d=null;r.beginPath();const h=Math.max(1,Math.round(.01*o.widthPercent*this._data.barSpacing*t.horizontalPixelRatio)),R=Math.floor(o.radius*t.horizontalPixelRatio);P.slice(this._data.visibleRange.from,this._data.visibleRange.to+1).forEach(n=>{const p=n.color;d!==null&&d!==p&&(r.fill(),r.beginPath()),r.fillStyle=p;const m=B(w,n.value,t.verticalPixelRatio),l=Math.floor(Math.min(R,h/2,Math.abs(m.length))),y=Math.round(n.x-h/2);r.roundRect(y,m.position,h,m.length,n.value<w?[l,l,0,0]:[0,0,l,l]),d=p}),r.fill()}}class I{constructor(){c(this,"_renderer");this._renderer=new D}priceValueBuilder(t){return[t.value]}isWhitespace(t){return t.value===void 0}renderer(){return this._renderer}update(t,a){this._renderer.update(t,a)}defaultOptions(){return C}}const x=window.chart=S("chart",{autoSize:!0}),z=new I;let _=!0;const i={autoscaleInfoProvider:e=>{const t=e();if(!_)return t;if(!(t!=null&&t.priceRange))return{priceRange:{minValue:0,maxValue:0}};const a=Math.min(t.priceRange.minValue,0),o=Math.max(t.priceRange.maxValue,0);return{...t,priceRange:{minValue:a,maxValue:o}}},radius:6,widthPercent:50},s=x.addCustomSeries(z,i),u=V(6);u.forEach((e,t)=>{e.color=t%2?"#6438D6":void 0});s.setData(u);x.timeScale().fitContent();u.forEach((e,t)=>{const a=document.getElementById(`bar_${t+1}`);a.value=e.value.toFixed(2),a.onchange=()=>{const o=parseFloat(a.value);isNaN(o)||(e.value=o,s.setData(u))}});const f=document.getElementById("radius");f.value=i.radius.toString();f.onchange=()=>{const e=parseFloat(f.value);e>=0&&(i.radius=e,s.applyOptions(i))};const g=document.getElementById("width");g.value=i.widthPercent.toString();g.onchange=()=>{const e=parseFloat(g.value);e>=0&&e<=100&&(i.widthPercent=e,s.applyOptions(i))};const v=document.getElementById("autoscaleToZero");v.checked=_;v.onchange=()=>{_=v.checked,s.applyOptions(i)};
