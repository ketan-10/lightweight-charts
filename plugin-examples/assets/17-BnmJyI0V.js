var P=Object.defineProperty;var x=(r,e,i)=>e in r?P(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i;var a=(r,e,i)=>x(r,typeof e!="symbol"?e+"":e,i);import{c as y,l as T}from"./index-DxQGhxyu.js";import{g as v}from"./sample-data-x_8-FZm1.js";const f=40,b=3,S=2,m=10,u=12,C=4;class L{constructor(){a(this,"_data",null)}update(e){this._data=e}draw(e){e.useMediaCoordinateSpace(i=>{if(!this._data)return;const s=this._calculatePriceScale(i.mediaSize.height,this._data),o=s.reduce((d,h)=>Math.max(d,h.label.length),0),n="".padEnd(o,"0"),t=i.context,c=this._data.options.side==="left";t.font=`${u}px -apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif`,t.textAlign="center",t.textBaseline="top";const l=t.measureText(n).width,_=c?m:i.mediaSize.width-m-l,w=_+b+Math.round(l/2);s.forEach(d=>{t.beginPath();const h=d.y-u/2;t.roundRect(_,h,l+b*2,u+2*S,C),t.fillStyle=this._data.options.backgroundColor,t.fill(),t.beginPath(),t.fillStyle=this._data.options.textColor,t.fillText(d.label,w,h+S,l)})})}_calculatePriceScale(e,i){const s=[],o=Math.round(f/4);let n=o;for(;n<=e-o;)s.push(n),n+=f;return s.map(c=>{const p=i.coordinateToPrice(c);return p===null?null:{label:i.priceFormatter.format(p),y:c}}).filter(c=>!!c)}}class M{constructor(){a(this,"_renderer");this._renderer=new L}renderer(){return this._renderer}update(e){this._renderer.update(e)}}const V={textColor:"rgb(0, 0, 0)",backgroundColor:"rgba(255, 255, 255, 0.6)",side:"left"};class z{constructor(e){a(this,"_paneViews");a(this,"_chart",null);a(this,"_series",null);a(this,"_requestUpdate");a(this,"_options");this._options={...V,...e},this._paneViews=[new M]}applyOptions(e){this._options={...this._options,...e},this._requestUpdate&&this._requestUpdate()}attached({chart:e,series:i,requestUpdate:s}){this._chart=e,this._series=i,this._requestUpdate=s}detached(){this._chart=null,this._series=null}updateAllViews(){if(!this._series||!this._chart)return;const e=t=>this._series.coordinateToPrice(t),i=t=>this._series.priceToCoordinate(t),s=this._series.priceFormatter(),o=this._options,n={coordinateToPrice:e,priceToCoordinate:i,priceFormatter:s,options:o};this._paneViews.forEach(t=>t.update(n))}paneViews(){return this._paneViews}}const k=window.chart=y("chart",{autoSize:!0,rightPriceScale:{visible:!1},grid:{horzLines:{visible:!1}}}),g=k.addSeries(T,{priceScaleId:"overlay"}),F=v();g.setData(F);g.attachPrimitive(new z({}));
